# FEWS for Indonesia, Bandung Regency

This is a Flood Early Warning System (FEWS) focused on the Bandung Regency area in Java, Indonesia.

It was developed as part of the 2024/2025 iteration of the "ICT for the Global South" course at the Vrije Universiteit Amsterdam.

## Overview

The system is an extendable framework composed of three components. Data sources, hazard indices (i.e., the forecasting models), and lastly notifiers. See `main.py`, where component implementations are registered.

To learn more about the administrative boundaries that are used, see `cadastre/README.md`.

```
.
├── areas.py                        <- Logic for mapping from grid based flood risk to area based flood risk.
├── backtest-v2.py                  <= 2) Run this to evaluate / backtest the system.
├── backtest.py
├── cadastre
│   ├── dibi_provinces.md           <- Set of all DIBI provinces.
│   ├── gadm_provinces_l1.md        <- Set of all GADM L1 provinces.
│   ├── gadm41_IDN_2.cpg
│   ├── gadm41_IDN_2.dbf
│   ├── gadm41_IDN_2.prj
│   ├── gadm41_IDN_2.shp
│   ├── gadm41_IDN_2.shx
│   ├── gadm41_IDN_3_Java.cpg
│   ├── gadm41_IDN_3_Java.dbf
│   ├── gadm41_IDN_3_Java.prj
│   ├── gadm41_IDN_3_Java.shp
│   ├── gadm41_IDN_3_Java.shx
│   └── README.md                   <- More information about the cadastre / administrative boundaries that are used.
├── dibi_api_types.py
├── dibi_hist_event_store.py        <- Logic for scraping the DIBI v3 disaster event database.
├── gadm_java.py                    <- Utility to create filtered GADM administrative boundary files.
├── indices.py                      <- Defines the hazard indices.
├── interface.py
├── main.py                         <= 1) Run this to gather data, perform a prediction, and send out notifications.
├── map.py
├── metrics.py
├── notifiers.py                    <- Defines the notifiers.
├── pyproject.toml
├── README.md                       <- You are here.
├── requirements.txt
├── results                         <- Contains parameters used and results of evaluation runs (backtest-v2.py).
│   └── eval1.md
├── ruff.toml
├── sources.py                      <- Defines the data sources.
├── utils.py
└── uv.lock

Generated by "tree . -L 2".
```

## Development

### Prerequisites
- Install [GDAL](https://gdal.org/en/latest/download.html).
  - `brew install gdal` (MacOS)
- (Recommended) Use `uv` as package manager, install [here](https://docs.astral.sh/uv/#installation).
  - Alternatively, use Python 3.11 and `pip install -r requirements.txt`.

### Run
- Run `uv run main.py` to execute the system's main loop, that is, gather data, compute forecast, and send out notifications.
- To see all executable options, run `uv run main.py --help`. For example run in debug mode: `uv run main.py -l DEBUG`.

## Evaluation / backtesting
- Configure the parameters (e.g., date range) by editing `backtest-v2.py`.
- Run `uv run backtest-v2.py` (also has debug mode).
